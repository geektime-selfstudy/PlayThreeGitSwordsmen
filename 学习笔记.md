## 配置user信息

配置user.name 和 user.email

git config --global user.name 'your_username'

git config --global user.email 'your_email@domain.com'

### config的三个作用域

缺省等同于local

1. git config --local    只对某个仓库有效
2. git config --global 只对当前用户所有仓库有效
3. git config --system   对系统所有登录的用户有效


显示config现有的配置，可以加上--list

1. git config --list --local
2. git config --list --global
3. git config --list --system


注意：local的作用 > gloabl的作用 > system的作用


---------------------

## 建造Git仓库

### 场景一：项目代码已经存在
1. cd 项目所在文件夹
2. git init

### 场景二：新建的项目
1. git init 项目名称

> git 将会帮助我们新建项目文件夹，同时还会帮助我们git init该目录




---------------------

## 向仓库里添加文件
当我们创建一个新的文件时，只存在于工作区，Git并没有将其纳入管理
1. 使用git add命令之后，将会对指定的文件进行管控，并将其放入暂存区
2. 使用git commit命令之后，将会把项目加入到版本历史中

**对于我们已经使用git add命令管控的文件，当文件发生更新的时候，我们可以使用git add -u命令将新变化提交到暂存区，而不必再使用git add 文件名**


---------------------

## 给文件重命名的简便方法

复杂操作：
1. 使用mv将文件重命名
2. 使用git add 将新文件名加入到暂存区
3. 使用git rm 删除旧文件名

简便操作：
直接使用git mv 命令重命名文件即可！


---------------------

## git log命令查看版本演变历史
对于版本演变历史，可以使用git log命令进行查看，但是我们通常会带一些可选参数

注意：git log查看到的是当前分支的版本历史，其他版本并没有显示

### git log --oneline 将每次commit简写为一行(简洁)，打印全部的版本演变历史记录

#### 直接使用git log命令展示的一个commit

```git

commit 5ac055562f1425823796952a49f01096aa338bf0 (HEAD -> master)
Author: yirufeng <1666762170@qq.com>
Date:   Tue Apr 16 20:05:41 2019 +0800

    modify readme to readme.md


```

#### 使用git log --oneline 命令展示的commit

```git

5ac0555 (HEAD -> master) modify readme to readme.md
64df83f add readme
52524fe Add js
a234546 add styles
5035852 Add index.html
2d5952a add README.md

```

### 只关心最近的几个commit
> git log -n3   # 展示最近的3个commit记录，可以自定义
> git log -n3 --oneline # 可以结合使用

### 查看所有分支的版本演变历史
> git log --all
> git log --all --graph # 通过图形化的描述将所有版本演变历史更加形象的展示出来
> git log --all --oneline -n4 # 最近4个所有版本的提交记录
> git log --all --oneline --graph 分支名 # 由于有--all 将会展示所有分支的记录。
> git log --oneline --graph 分支名 # 只会展示指定分支的记录


可以通过命令git help log查看git文档中关于git log的用法


### 其他命令
> git branch # 查看当前拥有的分支，前面带有*号的表示当前所使用的分支
> git branch -v # 查看当前所有分支以及每个分支的最后一次提交记录，前面带有*号的表示当前所使用的分支
> git commit -am'提交记录' # 将当前修改过后还没有git add修改的文件 直接加入到暂存区(-a参数意思是直接忽略将变更从工作去加入到暂存区的过程)。 **不推荐使用**
> git checkout -b 版本名 版本历史的数字号  # 将会在版本历史的数字号提交的记录后创建一个新的分支
> git checkout 版本名 # 切换到指定的版本名
> git branch -D 版本名  # 删除指定的版本名


---------------------

## gitk 图形化显示版本历史




---------------------

## 探索.git目录
> 为何git不需要远程支持就可以实现本地的最优存储以及版本控制？
在我们使用git init命令初始化之后,就会形成一个.git目录,里面包含了整个git的精髓

### 目录介绍
1. HEAD文件：里面的内容就是当前工作的分支，是一个引用，指向refs/head中的分支
2. config文件：存放与仓库配置相关的信息，例如我们使用git config --local 配置用户名和邮箱的内容就存放在里面，当修改config文件中对应的内容的时候，配置的用户名也会跟着修改
3. refs文件夹：heads文件夹用来存放每个分支，其中每个文件都是一个commit类型(使用git cat-file -t 文件名    来查看文件类型，里面的内容都是对应分支最后一次提交的hash值)，tags用来存放标签(里程碑，例如标注项目开发的进度)，每个标签都是一个commit，可以采用git cat-file -p commit文件名 来查看commit中的内容
4. objects文件夹：里面有很多文件夹，其中pack用于存放打包之后的数据，其他随机生成的文件夹里面都是一个tree类型的文件, 查看文件内容有的会指向其他tree和blob, 其中要注意**查看的时候需要使用git cat-file -p 文件名(前面要加上两个字符的父文件名)**

```shell
yirufeng@ubuntu:~/git_repository/git_learning/.git/objects/ff$ ls -al
总用量 12
drwxr-xr-x  2 yirufeng yirufeng 4096 4月  17 11:58 .
drwxr-xr-x 33 yirufeng yirufeng 4096 4月  17 12:04 ..
-r--r--r--  1 yirufeng yirufeng  180 4月  17 11:58 444a00fb8079f1a653a1f6e9dd304358a41a59
yirufeng@ubuntu:~/git_repository/git_learning/.git/objects/ff$ git cat-file -p ff444a



```


> 为何有的时候commit的hash值很短，因为只要长度足够区分所有的commit就可以显示了！
> git config --local 属性名(user.name)  # 打印该仓库的用户名

注意：在文件中，只要任何文件内容相同，那么在git中就是唯一的一个blob(不管文件名是否相同)，这么做的好处在哪里呢？

### 其他命令
1. git branch -av
2. git cat-file -t 文件名  # 查看文件名的类型
3. git cat-file-p 文件名  # 查看commit类型的文件内容 

总结：这节课我们探索.git目录，发现了git 中的三个对象，commit对象，tree对象，blob文件对象(核心)


-----------------------

## commit, blob, tree三个对象之间的关系
> git最核心的就是存储，因为是版本管控，所以设计一个良好的存储机制对于版本管控系统来说非常关键

一个commit对应一棵树，每颗树又对应了当时的commit快照，可以通过tree(里面可能包含了小的树，可以层层直到找到文件即可)找到当时commit之后的状态, 

-----------------------



## 小练习：数一数tree的个数
**没有文件的文件夹 git 是不会理会的**

1. 当我们创建一个空文件夹的时候，git将不会去理会
2. 当我们在新创建的文件夹下创建一个新文件，并使用git add命令将其纳入管控之后，将会在objects目录下生成一个blob类型的文件，内容就是新文件的内容
3. 当我们使用git commit 命令提交的时候，将会生成commit对象以及tree对象,并且tree自己个人感觉是对应目录下被git管控的文件，如果当前目录还有个目录和文件，那么一个肯定是tree另一个肯定是blob类型的文件

```shell
yirufeng@ubuntu:~/git_repository/PlayThreeGitSwordsmen$ cd ..
yirufeng@ubuntu:~/git_repository$ git init hello_git
已初始化空的 Git 仓库于 /home/yirufeng/git_repository/hello_git/.git/
yirufeng@ubuntu:~/git_repository$ cd hello_git/
yirufeng@ubuntu:~/git_repository/hello_git$ ls -al
总用量 12
drwxr-xr-x 3 yirufeng yirufeng 4096 4月  18 14:10 .
drwxr-xr-x 7 yirufeng yirufeng 4096 4月  18 14:10 ..
drwxr-xr-x 7 yirufeng yirufeng 4096 4月  18 14:10 .git
yirufeng@ubuntu:~/git_repository/hello_git$ ls -al .git/
总用量 40
drwxr-xr-x 7 yirufeng yirufeng 4096 4月  18 14:10 .
drwxr-xr-x 3 yirufeng yirufeng 4096 4月  18 14:10 ..
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 branches
-rw-r--r-- 1 yirufeng yirufeng   92 4月  18 14:10 config
-rw-r--r-- 1 yirufeng yirufeng   73 4月  18 14:10 description
-rw-r--r-- 1 yirufeng yirufeng   23 4月  18 14:10 HEAD
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 hooks
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 info
drwxr-xr-x 4 yirufeng yirufeng 4096 4月  18 14:10 objects
drwxr-xr-x 4 yirufeng yirufeng 4096 4月  18 14:10 refs
yirufeng@ubuntu:~/git_repository/hello_git$ ls -al .git/obj
ls: 无法访问'.git/obj': 没有那个文件或目录
yirufeng@ubuntu:~/git_repository/hello_git$ ls -al .git/objects/
总用量 16
drwxr-xr-x 4 yirufeng yirufeng 4096 4月  18 14:10 .
drwxr-xr-x 7 yirufeng yirufeng 4096 4月  18 14:10 ..
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 info
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 pack
yirufeng@ubuntu:~/git_repository/hello_git$ echo 'hello world' > ^C
yirufeng@ubuntu:~/git_repository/hello_git$ mkdir doc
yirufeng@ubuntu:~/git_repository/hello_git$ ls
doc
yirufeng@ubuntu:~/git_repository/hello_git$ ls -al .git/objects/
总用量 16
drwxr-xr-x 4 yirufeng yirufeng 4096 4月  18 14:10 .
drwxr-xr-x 7 yirufeng yirufeng 4096 4月  18 14:10 ..
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 info
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 pack
yirufeng@ubuntu:~/git_repository/hello_git$ ls -al .git/objects/info/
总用量 8
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 .
drwxr-xr-x 4 yirufeng yirufeng 4096 4月  18 14:10 ..
yirufeng@ubuntu:~/git_repository/hello_git$ ls -al .git/objects/info/^C
yirufeng@ubuntu:~/git_repository/hello_git$ git status
位于分支 master

尚无提交

无文件要提交（创建/拷贝文件并使用 "git add" 建立跟踪）
yirufeng@ubuntu:~/git_repository/hello_git$ echo 'hello wordl' > /doc/readme
bash: /doc/readme: 没有那个文件或目录
yirufeng@ubuntu:~/git_repository/hello_git$ echo 'hello wordl' > ./doc/readme
yirufeng@ubuntu:~/git_repository/hello_git$ git status
位于分支 master

尚无提交

未跟踪的文件:
  （使用 "git add <文件>..." 以包含要提交的内容）

	doc/

提交为空，但是存在尚未跟踪的文件（使用 "git add" 建立跟踪）
yirufeng@ubuntu:~/git_repository/hello_git$ ls -al .git/objects/
总用量 16
drwxr-xr-x 4 yirufeng yirufeng 4096 4月  18 14:10 .
drwxr-xr-x 7 yirufeng yirufeng 4096 4月  18 14:12 ..
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 info
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 pack
yirufeng@ubuntu:~/git_repository/hello_git$ git add ^C
yirufeng@ubuntu:~/git_repository/hello_git$ git status
位于分支 master

尚无提交

未跟踪的文件:
  （使用 "git add <文件>..." 以包含要提交的内容）

	doc/

提交为空，但是存在尚未跟踪的文件（使用 "git add" 建立跟踪）
yirufeng@ubuntu:~/git_repository/hello_git$ git add doc/
yirufeng@ubuntu:~/git_repository/hello_git$ ls -al .git/objects/
总用量 20
drwxr-xr-x 5 yirufeng yirufeng 4096 4月  18 14:12 .
drwxr-xr-x 7 yirufeng yirufeng 4096 4月  18 14:12 ..
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:12 82
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 info
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 pack
yirufeng@ubuntu:~/git_repository/hello_git$ ls -al .git/objects/82
总用量 12
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:12 .
drwxr-xr-x 5 yirufeng yirufeng 4096 4月  18 14:12 ..
-r--r--r-- 1 yirufeng yirufeng   28 4月  18 14:12 c92fd6dc75e207db690ce671e32a350244a779
yirufeng@ubuntu:~/git_repository/hello_git$ cd .git/objects/82
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects/82$ git cat-file -t 82c9
blob
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects/82$ git cat-file -p 82c9
hello wordl
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects/82$ cd ..
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ cd .
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ cd ..
yirufeng@ubuntu:~/git_repository/hello_git/.git$ cd ..
yirufeng@ubuntu:~/git_repository/hello_git$ git status
位于分支 master

尚无提交

要提交的变更：
  （使用 "git rm --cached <文件>..." 以取消暂存）

	新文件：   doc/readme

yirufeng@ubuntu:~/git_repository/hello_git$ git commit -m'Add readme'
[master （根提交） a554b0e] Add readme
 1 file changed, 1 insertion(+)
 create mode 100644 doc/readme
yirufeng@ubuntu:~/git_repository/hello_git$ cd .git/objects/82
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects/82$ ls -al
总用量 12
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:12 .
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 ..
-r--r--r-- 1 yirufeng yirufeng   28 4月  18 14:12 c92fd6dc75e207db690ce671e32a350244a779
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects/82$ cd ..
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ cd ..
yirufeng@ubuntu:~/git_repository/hello_git/.git$ ls -al ./refs
总用量 16
drwxr-xr-x 4 yirufeng yirufeng 4096 4月  18 14:10 .
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 ..
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 heads
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 tags
yirufeng@ubuntu:~/git_repository/hello_git/.git$ git log
commit a554b0efb883df4bc54491bb7d97e4f352637951 (HEAD -> master)
Author: sivanWu0222 <yirufeng@foxmail.com>
Date:   Thu Apr 18 14:15:26 2019 +0800

    Add readme
yirufeng@ubuntu:~/git_repository/hello_git/.git$ ls -al
总用量 52
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 .
drwxr-xr-x 4 yirufeng yirufeng 4096 4月  18 14:11 ..
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 branches
-rw-r--r-- 1 yirufeng yirufeng   11 4月  18 14:15 COMMIT_EDITMSG
-rw-r--r-- 1 yirufeng yirufeng   92 4月  18 14:10 config
-rw-r--r-- 1 yirufeng yirufeng   73 4月  18 14:10 description
-rw-r--r-- 1 yirufeng yirufeng   23 4月  18 14:10 HEAD
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 hooks
-rw-r--r-- 1 yirufeng yirufeng  173 4月  18 14:15 index
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 info
drwxr-xr-x 3 yirufeng yirufeng 4096 4月  18 14:15 logs
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 objects
drwxr-xr-x 4 yirufeng yirufeng 4096 4月  18 14:10 refs
yirufeng@ubuntu:~/git_repository/hello_git/.git$ cd objects/
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ ls -al
总用量 32
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 .
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 ..
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 26
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 27
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:12 82
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 a5
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 info
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 pack
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ ls -al 26
总用量 12
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 .
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 ..
-r--r--r-- 1 yirufeng yirufeng   45 4月  18 14:15 f355b5fbd5d1d9853556244d8f5b92f7f1d7b0
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ git cat-file -t 26f355
tree
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ git cat-file -p 26f355
040000 tree 2703e839c2052735b78d3b856c385ce79502ed1b	doc
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ ls -al 26
总用量 12
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 .
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 ..
-r--r--r-- 1 yirufeng yirufeng   45 4月  18 14:15 f355b5fbd5d1d9853556244d8f5b92f7f1d7b0
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ ls -al
总用量 32
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 .
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 ..
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 26
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 27
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:12 82
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 a5
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 info
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:10 pack
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ ls -al 27
总用量 12
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 .
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 ..
-r--r--r-- 1 yirufeng yirufeng   51 4月  18 14:15 03e839c2052735b78d3b856c385ce79502ed1b
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ git cat-file -t 2703e
tree
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ git cat-file -p 2703e
100644 blob 82c92fd6dc75e207db690ce671e32a350244a779	readme
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ ls -al ./82
总用量 12
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:12 .
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 ..
-r--r--r-- 1 yirufeng yirufeng   28 4月  18 14:12 c92fd6dc75e207db690ce671e32a350244a779
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ git cat-file -t 82c92
blob
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ git cat-file -p 82c92
hello wordl
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ git cat-file -t 82c92^C
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ 
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ ls -al a5
总用量 12
drwxr-xr-x 2 yirufeng yirufeng 4096 4月  18 14:15 .
drwxr-xr-x 8 yirufeng yirufeng 4096 4月  18 14:15 ..
-r--r--r-- 1 yirufeng yirufeng  131 4月  18 14:15 54b0efb883df4bc54491bb7d97e4f352637951
yirufeng@ubuntu:~/git_repository/hello_git/.git/objects$ git cat-file -p a554b
tree 26f355b5fbd5d1d9853556244d8f5b92f7f1d7b0
author sivanWu0222 <yirufeng@foxmail.com> 1555568126 +0800
committer sivanWu0222 <yirufeng@foxmail.com> 1555568126 +0800

Add readme


```


## 配置公私钥
[参考](https://help.github.com/en/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)

1. 查看有无ssh文件，ls -al ~/.ssh
2. 如果没有可以采用如下命令生成公钥和私钥
3. 将公钥配置到GitHUb中的私人配置SSH Key上


> ssh-keygen -t rsa -b 4096 -C "your_email@example.com"


---------------------------

## 在GitHub上创建个人仓库
> 创建个人仓库的时候的README在其他用户通过关键字搜索仓库的时候起到很大作用，因为GitHub会用README匹配关键字


---------------------------

## 


---------------------------

